<template>
    <lightning-card title={listTitle} icon-name="utility:money">
        <template if:true={isLoading}>
            <lightning-spinner variant="brand"></lightning-spinner>
        </template>
        <template if:false={isLoading}>
            <template if:true={hasPayments}>
                <template for:each={paymentGroups} for:item="paymentGroup">
                    <template for:each={paymentGroup} for:item="payment">
                        <h1
                            class="slds-text-title_caps slds-border_bottom slds-var-m-bottom_small"
                            key={payment.group}
                        >
                            <lightning-formatted-date-time
                                year="numeric"
                                month="long"
                                value={payment.data.utbetalingsdato}
                            ></lightning-formatted-date-time>
                        </h1>
                        <c-nks-person-payment
                            key={payment.data.posteringsdato}
                            payment={payment.data}
                        ></c-nks-person-payment>
                    </template>
                </template>
            </template>
            <template if:false={hasPayments}>
                <c-nks-alert-banner type="Info" message={noPaymentsMessage}></c-nks-alert-banner>
            </template>
            <template if:true={error}>
                <!--Error message-->
                <c-nks-alert-banner type="Error" message={errorMessage}>/</c-nks-alert-banner>
            </template>
        </template>
    </lightning-card>
</template>
