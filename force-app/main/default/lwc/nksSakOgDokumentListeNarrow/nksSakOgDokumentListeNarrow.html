<template>
    <lightning-layout multiple-rows="true">
        <!-- INPUT SECTION -->
        <lightning-layout-item>
            <lightning-layout multiple-rows="true">
                <!-- TYPE SELECTION -->
                <lightning-layout-item size="12">
                    <lightning-layout>
                        <lightning-layout-item class="slds-p-right_small">
                            <lightning-input
                                type="checkbox"
                                label="Inngående"
                                name="I"
                                class="journalpostType slds-m-top_large"
                                checked
                                onchange={handleJournalpostTypeCheckboxChange}
                            >
                            </lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item class="slds-p-right_small">
                            <lightning-input
                                type="checkbox"
                                label="Utgående"
                                name="U"
                                class="journalpostType slds-m-top_large"
                                checked
                                onchange={handleJournalpostTypeCheckboxChange}
                            >
                            </lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item class="slds-p-right_small">
                            <lightning-input
                                type="checkbox"
                                label="Notat"
                                name="N"
                                class="journalpostType slds-m-top_large"
                                checked
                                onchange={handleJournalpostTypeCheckboxChange}
                            >
                            </lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
                <!-- DATE FILTER -->
                <lightning-layout-item size="12" class="slds-m-top_xxx-small">
                    <lightning-layout>
                        <lightning-layout-item class="slds-p-right_small">
                            <lightning-input
                                type="date"
                                label="Fra"
                                value={fromDate}
                                onchange={handleJournalpostFromDateChange}
                            ></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item>
                            <lightning-input
                                type="date"
                                label="Til"
                                value={toDate}
                                onchange={handleJournalpostToDateChange}
                            ></lightning-input>
                        </lightning-layout-item>
                    </lightning-layout>
                </lightning-layout-item>
                <!-- THEME GROUP -->
                <lightning-layout-item size="12" class="slds-m-top_xxx-small">
                    <lightning-layout>
                        <template for:each={themeGroupArr} for:item="themeGroup">
                            <lightning-layout-item key={themeGroup.value} size="2">
                                <lightning-input
                                    type="checkbox"
                                    label={themeGroup.label}
                                    name={themeGroup.value}
                                    class="themeGroupCheckbox"
                                    onchange={handleThemeGroupCheckboxChange}
                                ></lightning-input>
                            </lightning-layout-item>
                        </template>
                    </lightning-layout>
                </lightning-layout-item>
                <!-- disabled={isThemeFieldsDisabled} -->
                <!-- THEME -->
                <lightning-layout-item size="6" class="slds-m-top_xxx-small">
                    <lightning-combobox
                        name="themePicklist"
                        label="Tema"
                        options={themeArr}
                        value={selectedTheme}
                        onchange={handleSetSelectedTheme}
                        disabled={isThemeFieldsDisabled}
                    ></lightning-combobox>
                </lightning-layout-item>
            </lightning-layout>
        </lightning-layout-item>

        <!-- CASE AND JOURNAL POST LIST -->
        <lightning-layout-item size="12" class="slds-m-top_small">
            <lightning-layout multiple-rows="true">
                <lightning-layout-item size="12" class="slds-m-top_xxx-small">
                    <!-- EMPTY RESULT -->
                    <template if:true={isEmptyResult}>
                        <p>Kunne ikke finne noen journalposter.</p>
                    </template>
                    <!-- LIST OF JOURNALPOSTS -->
                    <template if:false={isEmptyResult}>
                        <lightning-accordion
                            allow-multiple-sections-open
                            active-section-name={activeSections}
                            class=".slds-border_top .slds-border_bottom"
                        >
                            <template for:each={filteredJournalPosts} for:item="casex">
                                <lightning-accordion-section
                                    key={casex.caseId}
                                    name={casex.caseId}
                                    label={casex.caseTitle}
                                >
                                    <ul class="slds-has-dividers_bottom-space">
                                        <template iterator:it={casex.journalpostList}>
                                            <li if:false={it.last} class="slds-item" key={it.value.journalpostId}>
                                                <c-nks-saf-journalpost journalpost={it.value}></c-nks-saf-journalpost>
                                            </li>
                                            <li if:true={it.last} key={it.value.journalpostId}>
                                                <c-nks-saf-journalpost journalpost={it.value}></c-nks-saf-journalpost>
                                            </li>
                                        </template>
                                    </ul>
                                </lightning-accordion-section>
                            </template>
                        </lightning-accordion>
                    </template>
                </lightning-layout-item>

                <lightning-layout-item size="12" class="slds-m-top_xxx-small">
                    <div class="slds-box slds-theme_shade">
                        <p>NB: Vi viser kun dokumenter som er opprettet etter 4. juni 2016.</p>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </lightning-layout-item>
    </lightning-layout>
</template>
