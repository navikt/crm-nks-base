<template>
    <article class="slds-card">
        <lightning-layout multiple-rows="true">
            <!--HEADER-->
            <lightning-layout-item size="12" class="slds-p-around_small" style={headerBackground}>
                <lightning-layout vertical-align="center">
                    <template if:true={icon}>
                        <lightning-icon icon-name={icon}></lightning-icon>
                    </template>
                    <h3 class="slds-p-left_x-small slds-text-heading_medium">{cardTitle}</h3>
                </lightning-layout>
            </lightning-layout-item>
            <template if:true={relatedRecords}>
                <div class="slds-table--header-fixed_container" style={tableHeaderStyle}>
                    <div class="slds-scrollable_y" style={scrollableStyle}>
                        <table
                            class="slds-table slds-table_cell-buffer slds-table--header-fixed slds-table_bordered slds-max-medium-table_stacked-horizontal"
                        >
                            <tbody>
                                <template for:each={relatedRecords} for:item="record" for:index="rowIndex">
                                    <c-nks-related-list-item
                                        key={record}
                                        record={record}
                                        field-labels={fieldLabels}
                                        row-index={rowIndex}
                                        related-object-api-name={relatedObjectApiName}
                                    ></c-nks-related-list-item>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </template>
        </lightning-layout>
    </article>
</template>
