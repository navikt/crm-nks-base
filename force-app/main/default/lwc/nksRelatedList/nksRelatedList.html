<template>
    <template if:true={showCard}>
        <lightning-layout multiple-rows="true" class="slds-card">
            <!--HEADER-->
            <lightning-layout-item
                size="12"
                class="slds-p-around_small slds-card__header slds-m-bottom_none custom-no-bottom-radius slds-box"
                style={headerBackground}
            >
                <lightning-layout vertical-align="center">
                    <template if:true={icon}>
                        <lightning-icon icon-name={icon} size="small"></lightning-icon>
                    </template>
                    <h3 class="slds-p-left_x-small slds-text-heading_small">{cardTitle}</h3>
                </lightning-layout>
            </lightning-layout-item>
            <template if:true={relatedRecords}>
                <div
                    class="slds-grow slds-listbox_vertical slds-card__body slds-m-bottom_none slds-m-top_none"
                    role="list"
                >
                    <div class="slds-scrollable_y" style={scrollableStyle}>
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                            <tbody>
                                <template for:each={relatedRecords} for:item="record" for:index="rowIndex">
                                    <c-nks-related-list-item
                                        key={record}
                                        record={record}
                                        used-fields={usedFields}
                                        row-index={rowIndex}
                                        related-object-api-name={relatedObjectApiName}
                                    ></c-nks-related-list-item>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </template>
        </lightning-layout>
    </template>
</template>
